<!doctype html>
<meta charset="utf-8">
<title>TrueTrend Pro v16</title>
<style>
  body{font-family:system-ui;background:#0a0d16;color:#eaeef5;margin:12px;min-width:560px}
  label{display:block;margin:6px 0 4px;font-size:12px;opacity:.9}
  input,select{width:100%;padding:8px;border-radius:10px;border:1px solid #334;background:#0f1424;color:#eaeef5}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .buttons{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:10px 0}
  button{padding:10px;border:0;border-radius:10px;font-weight:700;cursor:pointer}
  .attach{background:#2e7bd6}.detach{background:#6c757d}.go{background:#1fc46b}.vision{background:#3a3f53}.exit{background:#f55757}.test{background:#198754}
  pre{background:#0f1424;border:1px solid #223;min-height:140px;border-radius:10px;padding:10px;overflow:auto}
</style>
<h3 style="margin:0 0 8px">TrueTrend Pro <span style="opacity:.7">v16</span></h3>

<div class="row">
  <div><label>Symbol <input id="symbol" placeholder="AAPL"></label></div>
  <div><button id="detect">Detect</button></div>
</div>

<div class="row">
  <div><label>Primary TF
    <select id="timeframe"><option>1min</option><option selected>5min</option><option>15min</option><option>60min</option><option>daily</option></select>
  </label></div>
  <div><label>Higher TF
    <select id="htf"><option value="">— off —</option><option selected>15min</option><option>60min</option><option>daily</option></select>
  </label></div>
</div>

<div class="row">
  <div><label>Strategy
    <select id="strategy">
      <option value="router" selected>Router (EMA+ST+ORB+BOS)</option>
      <option value="ema">EMA(9/21)</option>
      <option value="supertrend">Supertrend</option>
      <option value="orb">Opening Range</option>
      <option value="bos">Breaker Structure</option>
    </select>
  </label></div>
  <div><label><input type="checkbox" id="voice" checked> Voice</label></div>
</div>

<details open>
  <summary><b>Keys</b></summary>
  <div class="row">
    <div><label>Polygon Key <input id="polyKey"></label></div>
    <div><label>Twelve Data Key <input id="tdKey"></label></div>
  </div>
  <div class="row">
    <div><label>Finnhub Key <input id="fhKey"></label></div>
    <div><label>Vision Provider
      <select id="visionProv"><option value="google" selected>Google Vision</option><option value="openai">OpenAI</option></select>
    </label></div>
  </div>
  <div class="row">
    <div><label>Google Vision API Key <input id="gvKey" placeholder="AIza..."></label></div>
    <div><label>OpenAI URL <input id="oaiUrl" value="https://api.openai.com/v1/chat/completions"></label></div>
  </div>
  <div class="row">
    <div><label>OpenAI Key <input id="oaiKey" placeholder="sk-... or sk-proj-..."></label></div>
    <div><label>OpenAI Project (opt) <input id="oaiProject" placeholder="proj_..."></label></div>
  </div>
  <button class="test" id="visionTest">Test Vision</button>
</details>

<div class="buttons">
  <button class="attach" id="attach">Attach</button>
  <button class="detach" id="detach">Detach</button>
  <button class="go" id="analyze">Analyze</button>
  <button class="vision" id="vision">Vision</button>
  <button class="exit" id="exit">Exit</button>
</div>

<pre id="out">{ "ok": true }</pre>
<script src="popup.js"></script>
